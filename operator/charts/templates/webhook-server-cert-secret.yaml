{{- /*
  Create this Secret if autoProvision is either:
  - Not specified (defaults to true behavior), OR
  - Explicitly set to true
  This allows the operator to auto-generate webhook TLS certs at startup.
*/ -}}
{{- if or (not (hasKey .Values.config.server.webhooks "autoProvision")) .Values.config.server.webhooks.autoProvision }}
---
apiVersion: v1
kind: Secret
metadata:
  name: grove-webhook-server-cert
  namespace: {{ .Release.Namespace }}
  labels:
{{- include "operator.server.secret.labels" . | nindent 4 }}
type: kubernetes.io/tls
data:
  tls.crt: ""
  tls.key: ""
{{- end }}
