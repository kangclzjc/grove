{{- /*
  Backward compatibility note: This Secret defaults to enabled because removing a
  previously Helm-managed resource causes `helm upgrade` to delete it. Users deploying
  via `helm template | kubectl apply` or GitOps should set webhookServerSecret.enabled=false
  and let the operator create and manage this secret directly.
*/ -}}
{{- if and .Values.webhookServerSecret.enabled (ne (.Values.config.server.webhooks.certProvisionMode | default "auto") "manual") }}
---
apiVersion: v1
kind: Secret
metadata:
  name: grove-webhook-server-cert
  namespace: {{ .Release.Namespace }}
  labels:
{{- include "operator.server.secret.labels" . | nindent 4 }}
type: kubernetes.io/tls
data:
  tls.crt: ""
  tls.key: ""
{{- end }}
